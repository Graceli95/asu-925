# Field Aliases Guide - Song Model

## Overview
The Song model now supports **field aliases** for flexible API input. This allows clients to use alternative field names when creating or updating songs.

---

## Available Aliases

### Field: `title`
**Aliases:** `song_title`, `title`

**Examples:**
```json
// Option 1: Using primary field name
{
  "title": "Bohemian Rhapsody",
  "artist": "Queen",
  "user": "john_doe"
}

// Option 2: Using alias
{
  "song_title": "Bohemian Rhapsody",
  "artist": "Queen",
  "user": "john_doe"
}
```

---

### Field: `artist`
**Aliases:** `artist_name`, `artist`

**Examples:**
```json
// Using primary field name
{
  "title": "Stairway to Heaven",
  "artist": "Led Zeppelin",
  "user": "john_doe"
}

// Using alias
{
  "title": "Stairway to Heaven",
  "artist_name": "Led Zeppelin",
  "user": "john_doe"
}
```

---

### Field: `user`
**Aliases:** `username`, `user`

**Examples:**
```json
// Using primary field name
{
  "title": "Hotel California",
  "artist": "Eagles",
  "user": "music_lover"
}

// Using alias
{
  "title": "Hotel California",
  "artist": "Eagles",
  "username": "music_lover"
}
```

---

### Field: `genre`
**Aliases:** `music_genre`, `genre`

**Examples:**
```json
// Using primary field name
{
  "title": "Take Five",
  "artist": "Dave Brubeck",
  "user": "jazz_fan",
  "genre": "Jazz"
}

// Using alias
{
  "title": "Take Five",
  "artist": "Dave Brubeck",
  "user": "jazz_fan",
  "music_genre": "Jazz"
}
```

---

### Field: `year`
**Aliases:** `release_year`, `year`

**Examples:**
```json
// Using primary field name
{
  "title": "Imagine",
  "artist": "John Lennon",
  "user": "classic_rock",
  "year": 1971
}

// Using alias
{
  "title": "Imagine",
  "artist": "John Lennon",
  "user": "classic_rock",
  "release_year": 1971
}
```

---

### Field: `created_at`
**Aliases:** `date_created`, `created_at`

**Examples:**
```json
// Using primary field name
{
  "title": "Yesterday",
  "artist": "The Beatles",
  "user": "beatles_fan",
  "created_at": "2024-10-01T12:00:00"
}

// Using alias
{
  "title": "Yesterday",
  "artist": "The Beatles",
  "user": "beatles_fan",
  "date_created": "2024-10-01T12:00:00"
}
```

---

### Field: `updated_at`
**Aliases:** `date_updated`, `updated_at`

**Examples:**
```json
// Using primary field name
{
  "updated_at": "2024-10-02T15:30:00"
}

// Using alias
{
  "date_updated": "2024-10-02T15:30:00"
}
```

---

### Field: `_id`
**Aliases:** `song_id`, `id`, `_id`

**Note:** This field is typically not provided on input (auto-generated by MongoDB)

**Output Example:**
```json
// Response always uses "id" (not "_id")
{
  "id": "507f1f77bcf86cd799439011",
  "title": "Bohemian Rhapsody",
  "artist": "Queen",
  "user": "john_doe"
}
```

---

## Complete Examples

### Example 1: Create Song Using All Primary Field Names
```bash
curl -X POST "http://localhost:8000/songs" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Bohemian Rhapsody",
    "artist": "Queen",
    "user": "john_doe",
    "genre": "Rock",
    "year": 1975
  }'
```

### Example 2: Create Song Using All Aliases
```bash
curl -X POST "http://localhost:8000/songs" \
  -H "Content-Type: application/json" \
  -d '{
    "song_title": "Bohemian Rhapsody",
    "artist_name": "Queen",
    "username": "john_doe",
    "music_genre": "Rock",
    "release_year": 1975
  }'
```

### Example 3: Create Song Using Mixed Names
```bash
curl -X POST "http://localhost:8000/songs" \
  -H "Content-Type: application/json" \
  -d '{
    "song_title": "Bohemian Rhapsody",
    "artist": "Queen",
    "username": "john_doe",
    "genre": "Rock",
    "release_year": 1975
  }'
```

**All three examples above are valid and produce the same result!**

---

## How Aliases Work

### Input (Validation Aliases)
- When creating or updating a song, you can use **either** the primary field name **or** its alias
- Pydantic automatically maps the alias to the correct field
- Example: `"song_title"` → `title`, `"artist_name"` → `artist`

### Output (Serialization)
- Responses always use the **primary field name** (or serialization alias)
- Exception: `_id` is always output as `"id"` for cleaner API responses
- Example: Response contains `"title"`, not `"song_title"`

---

## Benefits

### 1. **Flexibility**
- Clients can use field names that match their naming conventions
- Easier integration with different frontend frameworks

### 2. **Backward Compatibility**
- Add new aliases without breaking existing clients
- Support legacy field names during migrations

### 3. **Developer Experience**
- More intuitive field names for different use cases
- Clear documentation in Swagger/ReDoc

### 4. **Consistency**
- Output always uses canonical field names
- No confusion about which field name to use in responses

---

## Alias Summary Table

| Primary Field | Validation Alias | Description |
|---------------|------------------|-------------|
| `title` | `song_title` | Song title |
| `artist` | `artist_name` | Artist name |
| `user` | `username` | Username/owner |
| `genre` | `music_genre` | Music genre |
| `year` | `release_year` | Release year |
| `created_at` | `date_created` | Creation timestamp |
| `updated_at` | `date_updated` | Update timestamp |
| `_id` | `song_id` (input), `id` (output) | MongoDB ObjectId |

---

## Testing Aliases

### Test in Swagger UI
1. Go to `http://localhost:8000/docs`
2. Try the POST `/songs` endpoint
3. Use aliases in the request body
4. Verify the response uses primary field names

### Test with cURL
```bash
# Test with primary names
curl -X POST "http://localhost:8000/songs" \
  -H "Content-Type: application/json" \
  -d '{"title": "Test Song", "artist": "Test Artist", "user": "test_user"}'

# Test with aliases
curl -X POST "http://localhost:8000/songs" \
  -H "Content-Type: application/json" \
  -d '{"song_title": "Test Song", "artist_name": "Test Artist", "username": "test_user"}'
```

Both should return the same structure with `"title"`, `"artist"`, and `"user"` in the response.

---

## Important Notes

⚠️ **Response Format**
- Responses always use primary field names (except `_id` → `id`)
- Don't expect aliases in response bodies

⚠️ **Case Sensitivity**
- Field names and aliases are case-sensitive
- Use exact casing as shown in this guide

⚠️ **Validation**
- Aliases don't bypass validation
- All constraints apply regardless of which field name is used

⚠️ **Both Names Work**
- You can use the primary field name OR the alias
- You cannot use both in the same request (one will be ignored)

---

## Migration Path

If you want to change field names in the future:

1. Add the new name as a `validation_alias`
2. Keep the old name as the primary field
3. Update documentation
4. After transition period, optionally swap primary/alias
5. Eventually deprecate old names

This allows gradual migration without breaking existing clients!

